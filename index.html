<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Globber’s\nInk Log</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;800&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --panel:#1a241f;
      --panel2:#16201b;
      --emerald:#1f6f50;
      --gold:#d4af37;
      --text:#f2f2f2;
      --danger:#a94442;
      --muted:rgba(255,255,255,.75);
      --booked:#2a5bd7;
      --chip:#0f1713;
      --card:#0f1713;
      --stroke:rgba(212,175,55,.22);
      --stroke2:rgba(31,111,80,.55);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      color:var(--text);
      background:linear-gradient(160deg,#0e1512,#081a14);
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* ===== TOP BAR ===== */
    header{
      padding:
        calc(12px + env(safe-area-inset-top))
        calc(14px + env(safe-area-inset-right))
        12px
        calc(14px + env(safe-area-inset-left));
      border-bottom:2px solid var(--gold);
    }
    .topbar{
      display:grid;
      grid-template-columns: 1fr auto 1fr;
      gap:12px;
      align-items:center;
    }

    .action-stack{
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:flex-start;
    }
    .action-stack.right{ align-items:flex-end; }

    .smallbtn{
      background:rgba(0,0,0,.12);
      border:1px solid rgba(212,175,55,.25);
      color:var(--text);
      padding:10px 14px;
      border-radius:999px;
      cursor:pointer;
      white-space:nowrap;
      font-weight:800;
      letter-spacing:.01em;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      min-width:120px;
      text-align:center;
    }
    .smallbtn:hover{ filter:brightness(1.06); }

    .brand{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:8px;
      min-width:0;
    }
    .brand-title{
      font-family:Cinzel, serif;
      font-weight:800;
      letter-spacing:.03em;
      font-size:1.35rem;
      line-height:1.1;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:min(62vw, 520px);
      text-align:center;
      color:var(--gold);
    }

    /* plain png logo (no border/shadow) */
    #logoImg{
      width:54px;height:54px;
      object-fit:contain;
      background:transparent;
      border:none;
      border-radius:0;
      box-shadow:none;
      cursor:pointer;
      display:block;
    }
    #logoInput{ display:none; }

    /* ===== SPLIT (center above stats) ===== */
    .split-row{
      margin-top:12px;
      display:flex;
      justify-content:center;
    }
    #splitPill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(212,175,55,.25);
      background:rgba(0,0,0,.12);
      color:var(--muted);
      font-size:.95rem;
      cursor:pointer;
      user-select:none;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      font-weight:800;
      letter-spacing:.01em;
    }
    #splitPill b{ color:var(--gold); }

    /* ===== STATS (centered pills) ===== */
    #stats{
      margin-top:12px;
      display:flex;
      justify-content:center;
    }
    .stats-grid{
      width:min(720px, 100%);
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap:14px;
      justify-items:center;
    }
    .stat-pill{
      width:100%;
      max-width:260px;
      background:rgba(0,0,0,.14);
      border:1px solid rgba(31,111,80,.55);
      border-radius:18px;
      padding:16px 14px;
      text-align:center;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }
    .stat-pill strong{
      display:block;
      color:var(--gold);
      font-size:2rem;
      line-height:1;
      margin-bottom:8px;
      font-weight:900;
      letter-spacing:.01em;
    }
    .stat-pill small{
      color:rgba(255,255,255,.86);
      font-weight:800;
      letter-spacing:.02em;
      font-size:1rem;
    }
    .stat-pill.year{
      grid-column: 1 / -1;
      max-width:320px;
    }

    .container{
      padding:
        14px
        calc(14px + env(safe-area-inset-right))
        90px
        calc(14px + env(safe-area-inset-left));
    }

    /* ===== Field label system ===== */
    .field{ width:100%; }
    .field label{
      display:block;
      margin:0 0 6px 2px;
      font-weight:900;
      letter-spacing:.01em;
      font-size:.86rem;
      color:rgba(255,255,255,.82);
    }

    input, textarea, select{
      display:block;
      margin:0;
      padding:12px;
      width:100%;
      background:#0f1713;
      color:white;
      border:1px solid rgba(31,111,80,.75);
      border-radius:12px;
      outline:none;
    }
    textarea{ min-height:90px; }

    /* ===== FILTERBAR ===== */
    .filterbar{
      background:rgba(0,0,0,.12);
      border:1px solid rgba(31,111,80,.55);
      border-radius:18px;
      padding:14px;
      margin:16px 0 14px;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }
    .filterbar .row{
      display:grid;
      grid-template-columns: 1.2fr 0.8fr 0.8fr;
      gap:10px;
    }
    @media(max-width:820px){ .filterbar .row{ grid-template-columns:1fr; } }

    .filterbar .row2{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media(max-width:820px){ .filterbar .row2{ grid-template-columns:1fr; } }

    .filter-actions{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-top:12px;
      align-items:center;
      justify-content:space-between;
    }
    .hint{ font-size:.95rem; opacity:.85; color:var(--muted); }

    button{
      background:var(--emerald);
      color:white;
      border:none;
      padding:10px 12px;
      margin-top:10px;
      cursor:pointer;
      border-radius:12px;
      font-weight:800;
      letter-spacing:.01em;
    }
    button:hover{ filter:brightness(1.06); }
    .secondarybtn{
      background:rgba(0,0,0,.16);
      border:1px solid rgba(31,111,80,.55);
    }
    .dangerbtn{ background:var(--danger); }

    /* ===== ACCORDION + ENTRIES ===== */
    .accordion{
      background:rgba(0,0,0,.12);
      border:1px solid rgba(31,111,80,.55);
      border-radius:18px;
      margin-bottom:12px;
      overflow:hidden;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }
    .accordion-header{
      padding:14px 14px;
      cursor:pointer;
      background:rgba(0,0,0,.14);
      display:flex;
      justify-content:space-between;
      align-items:center;
      user-select:none;
      gap:10px;
    }
    .accordion-header:hover{ filter:brightness(1.05); }
    .accordion-title{ font-weight:900; font-size:1.05rem; }
    .badge{
      font-size:.9rem;
      color:#111;
      background:var(--gold);
      border-radius:999px;
      padding:4px 12px;
      margin-left:10px;
      white-space:nowrap;
      font-weight:900;
    }
    .chev{ opacity:.9; margin-left:10px; font-weight:900; }
    .accordion-content{ display:none; padding:12px 12px 14px; }

    .entry{
      background:rgba(0,0,0,.16);
      padding:12px 12px;
      margin:10px 0;
      border-left:4px solid var(--gold);
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:10px;
      cursor:pointer;
      border-radius:14px;
    }
    .entry:hover{ outline:1px solid rgba(212,175,55,.25); }

    .entry-left{
      display:flex;
      flex-direction:column;
      gap:6px;
      min-width:0;
      flex:1 1 auto;
    }
    .entry-name{
      font-weight:900;
      color:var(--gold);
      line-height:1.1;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .client-link{
      color:var(--gold);
      text-decoration:underline;
      cursor:pointer;
      font-weight:900;
    }

    .client-badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:3px 10px;
      border-radius:999px;
      border:1px solid rgba(212,175,55,.25);
      background:rgba(0,0,0,.18);
      font-size:.8rem;
      color:rgba(255,255,255,.88);
      white-space:nowrap;
      max-width:220px;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .client-badge img{
      width:16px;height:16px;
      border-radius:4px;
      object-fit:cover;
      border:1px solid rgba(212,175,55,.20);
      background:transparent;
      flex:0 0 auto;
    }

    .entry-sub{
      display:flex;
      flex-direction:column;
      gap:4px;
      font-size:.95rem;
      opacity:.92;
      min-width:0;
    }
    .sub-row{ line-height:1.25; word-break:break-word; }
    .sub-row.clamp2{
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }

    .status{
      padding:6px 10px;
      border-radius:10px;
      font-size:.8rem;
      text-transform:uppercase;
      letter-spacing:.04em;
      margin-top:2px;
      white-space:nowrap;
      flex:0 0 auto;
      font-weight:900;
    }
    .paid{background:#2e7d32;}
    .partial{background:#f9a825; color:#111;}
    .unpaid{background:#616161;}
    .no_show{background:var(--danger);}
    .booked{background:var(--booked);}

    /* ===== MODALS ===== */
    .modal{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.90);
      display:none;
      align-items:flex-start;
      justify-content:center;
      padding:
        calc(96px + env(safe-area-inset-top))
        calc(14px + env(safe-area-inset-right))
        calc(50px + env(safe-area-inset-bottom))
        calc(14px + env(safe-area-inset-left));
      overflow:auto;
      z-index:9999;
    }
    .modal-box{
      background:rgba(0,0,0,.18);
      padding:26px 18px 18px;
      border:1px solid rgba(212,175,55,.25);
      border-radius:18px;
      max-width:680px;
      width:100%;
      margin:0 auto;
      box-shadow:none;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .modal-title{
      font-family:Cinzel, serif;
      font-size:1.25rem;
      font-weight:800;
      color:var(--gold);
      margin:0 0 14px 0;
      border-bottom:1px solid rgba(212,175,55,.22);
      padding-bottom:10px;
    }

    .row{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }
    @media(max-width:640px){ .row{grid-template-columns:1fr;} }

    .actions-row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }

    hr{
      border:none;
      border-top:1px solid rgba(31,111,80,.55);
      margin:18px 0;
    }

    .sectionDivider{
      height:1px;
      background:rgba(31,111,80,.55);
      margin:16px 0;
      border-radius:999px;
      opacity:.9;
    }

    details{
      background:rgba(0,0,0,.16);
      border:1px solid rgba(212,175,55,.22);
      padding:12px;
      border-radius:14px;
    }
    details summary{
      cursor:pointer;
      font-weight:900;
      color:var(--gold);
    }

    .summary-box{
      margin-top:12px;
      background:rgba(0,0,0,.16);
      border:1px solid rgba(212,175,55,.18);
      padding:12px;
      border-radius:14px;
    }
    .summary-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }
    @media(max-width:640px){ .summary-grid{grid-template-columns:1fr;} }

    .client-entry{
      background:rgba(0,0,0,.16);
      border-left:4px solid rgba(212,175,55,.7);
      padding:12px;
      border-radius:14px;
      cursor:pointer;
      margin-top:10px;
    }
    .client-entry:hover{ outline:1px solid rgba(212,175,55,.22); }
    .client-entry .top{
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:flex-start;
    }
    .client-entry .date{
      color:var(--muted);
      font-size:.9rem;
      white-space:nowrap;
    }
    .client-entry .desc{
      opacity:.92;
      margin-top:8px;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }
    <!-- CLIENTS MODAL -->
<div class="modal" id="clientsModal">
  <div class="modal-box" id="clientsBox">
    <div class="modal-title">Clients</div>

    <div id="clientsList"></div>

    <div class="actions-row">
      <button type="button" class="secondarybtn" onclick="closeClientsPage()">Close</button>
    </div>
  </div>
</div>

    /* Toasts */
    #toasts{
      position:fixed;
      right:14px;
      bottom:14px;
      display:flex;
      flex-direction:column;
      gap:10px;
      z-index:20000;
      max-width:min(420px, calc(100vw - 28px));
      pointer-events:none;
    }
    .toast{
      pointer-events:auto;
      background:rgba(18,27,23,.96);
      border:1px solid rgba(212,175,55,.35);
      border-left:4px solid var(--gold);
      border-radius:14px;
      padding:10px 12px;
      box-shadow:0 14px 40px rgba(0,0,0,.55);
      animation:toastIn .18s ease-out;
    }
    @keyframes toastIn{
      from{ transform:translateY(8px); opacity:0; }
      to{ transform:translateY(0); opacity:1; }
    }
    .toast .t-title{ font-weight:900; color:var(--gold); }
    .toast .t-sub{ opacity:.9; margin-top:4px; font-size:.92rem; }
    .toast .t-mini{ opacity:.75; margin-top:6px; font-size:.86rem; }
    .toast .t-row{ display:flex; align-items:center; gap:10px; }
    .toast .t-row img{
      width:28px;height:28px;border-radius:8px;object-fit:cover;
      border:1px solid rgba(212,175,55,.25);
      background:transparent;
    }
    .toast .t-actions{ margin-top:8px; display:flex; gap:10px; flex-wrap:wrap; }
    .toast .t-actions button{
      margin-top:0;
      padding:8px 10px;
      border-radius:12px;
      background:rgba(0,0,0,.18);
      border:1px solid rgba(31,111,80,.55);
    }

    @media (max-width:520px){
      .smallbtn{ min-width:108px; padding:10px 12px; }
      #logoImg{ width:50px; height:50px; }
      .brand-title{ font-size:1.2rem; }
      .stat-pill strong{ font-size:1.85rem; }
    }
    /* ===== CLIENTS PAGE ===== */
.client-card{
  background:rgba(0,0,0,.16);
  border:1px solid rgba(212,175,55,.18);
  border-left:4px solid rgba(212,175,55,.7);
  padding:12px;
  border-radius:14px;
  cursor:pointer;
  margin-top:10px;
}
.client-card:hover{ outline:1px solid rgba(212,175,55,.22); }
.client-card .top{
  display:flex;
  justify-content:space-between;
  gap:10px;
  align-items:flex-start;
  flex-wrap:wrap;
}
.client-card .name{
  font-weight:1000;
  color:var(--gold);
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}
.client-card .meta{
  opacity:.9;
  margin-top:6px;
  display:flex;
  gap:12px;
  flex-wrap:wrap;
}
.client-card .pill{
  display:inline-flex;
  gap:6px;
  align-items:center;
  padding:4px 10px;
  border-radius:999px;
  border:1px solid rgba(31,111,80,.55);
  background:rgba(0,0,0,.14);
  font-size:.85rem;
  white-space:nowrap;
}
  </style>
</head>

<body>
  <header>
    <div class="topbar">
      <!-- LEFT STACK -->
      <div class="action-stack left">
        <button class="smallbtn" type="button" onclick="openBills()">Bills</button>
        <button class="smallbtn" type="button" onclick="openExport()">Export</button>
        <button class="smallbtn" type="button" onclick="openRewards()">Rewards</button>
        <button class="smallbtn" type="button" onclick="openClientsPage()">Clients</button>
      </div>

      <!-- CENTER BRAND -->
      <div class="brand">
        <img id="logoImg" alt="Logo" title="Tap to upload logo">
        <input id="logoInput" type="file" accept="image/png,image/*">
        <div class="brand-title">Globber’s Ink Log</div>
      </div>

      <!-- RIGHT STACK -->
      <div class="action-stack right">
        <button class="smallbtn" type="button" onclick="openDepositQuick()">Deposit</button>
        <button class="smallbtn" type="button" onclick="openBammerQuick()">Bammer</button>
        <button class="smallbtn" type="button" onclick="openForm()">+ Entry</button>
      </div>
    </div>

    <div class="split-row">
      <div id="splitPill" title="Tap to edit split" onclick="openSettings()">
        Split: <b id="splitPillPct">100%</b>
      </div>
    </div>

    <div id="stats">
      <div class="stats-grid">
        <div class="stat-pill"><strong id="todayTotal">$0</strong><small>Today</small></div>
        <div class="stat-pill"><strong id="weekTotal">$0</strong><small>Week</small></div>
        <div class="stat-pill"><strong id="monthTotal">$0</strong><small>Month</small></div>
        <div class="stat-pill"><strong id="quarterTotal">$0</strong><small>Quarter</small></div>
        <div class="stat-pill year"><strong id="yearTotal">$0</strong><small>Year</small></div>
      </div>
    </div>
  </header>

  <div class="container">
    <!-- CLIENTS PAGE -->
<div id="clientsPage" style="display:none;">
  <div class="summary-box" style="margin-top:0;">
    <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;">
      <div style="font-weight:900;color:var(--gold);">Clients</div>
      <button type="button" class="secondarybtn" onclick="closeClientsPage()">Back</button>
    </div>

    <div class="row" style="margin-top:10px;">
      <div class="field">
        <label>Search Clients</label>
        <input id="clientsSearch" type="text" placeholder="">
      </div>
      <div class="field">
        <label>Sort</label>
        <select id="clientsSort">
          <option value="recent">Most Recent</option>
          <option value="count">Most Tattoos</option>
          <option value="net">Highest Net</option>
          <option value="name">Name (A→Z)</option>
        </select>
      </div>
    </div>

    <div class="hint" style="margin-top:10px;">Tap a client to open their profile.</div>
  </div>

  <div id="clientsList" style="margin-top:12px;"></div>
</div>
    <div class="filterbar">
      <div class="row">
        <div class="field">
          <label>Search</label>
          <input id="q" type="text" placeholder="">
        </div>

        <div class="field">
          <label>Status</label>
          <select id="statusFilter">
            <option value="all">All Status</option>
            <option value="booked">Booked</option>
            <option value="paid">Paid</option>
            <option value="partial">Partial</option>
            <option value="unpaid">Unpaid</option>
            <option value="no_show">No Show</option>
          </select>
        </div>

        <div class="field">
          <label>Location</label>
          <select id="locationFilter">
            <option value="all">All Locations</option>
          </select>
        </div>
      </div>

      <div class="row2">
        <div class="field">
          <label>From</label>
          <input id="fromDate" type="date">
        </div>
        <div class="field">
          <label>To</label>
          <input id="toDate" type="date">
        </div>
        <div class="field">
          <label>Sort</label>
          <select id="sortFilter">
            <option value="newest">Newest</option>
            <option value="oldest">Oldest</option>
          </select>
        </div>
      </div>

      <div class="filter-actions">
        <div class="hint">Filters affect the accordion + totals shown.</div>
        <div style="display:flex;gap:10px;flex-wrap:wrap;">
          <button type="button" class="secondarybtn" onclick="clearFilters()">Clear</button>
          <button type="button" onclick="applyFilters()">Apply</button>
        </div>
      </div>
    </div>

    <div id="entries"></div>
  </div>

  <!-- ADD/EDIT ENTRY MODAL -->
  <div class="modal" id="formModal">
    <div class="modal-box" id="formBox">
      <div class="modal-title" id="formTitle">Add Entry</div>

      <div class="field">
        <label>Date</label>
        <input type="date" id="date">
      </div>

      <div class="field">
        <label>Client Name</label>
        <input type="text" id="client" placeholder="">
      </div>

      <div class="row">
        <div class="field">
          <label>Client Contact</label>
          <input type="text" id="contact" placeholder="">
        </div>
        <div class="field">
          <label>Client Social</label>
          <input type="text" id="social" placeholder="">
        </div>
      </div>

      <div class="field">
        <label>Tattoo Description</label>
        <textarea id="description" placeholder=""></textarea>
      </div>

      <div class="field">
        <label>Location</label>
        <select id="location">
          <option value="">Choose location</option>
          <option>Arm</option><option>Leg</option><option>Back</option><option>Chest</option>
          <option>Hand</option><option>Foot</option><option>Neck</option>
        </select>
      </div>

      <div class="row">
        <div class="field">
          <label>Total Price</label>
          <input type="number" id="total" min="0" step="0.01" placeholder="">
        </div>
        <div class="field">
          <label>Deposit</label>
          <input type="number" id="deposit" min="0" step="0.01" placeholder="">
        </div>
      </div>

      <div class="field">
        <label>Status</label>
        <select id="status">
          <option value="booked">Booked</option>
          <option value="unpaid">Unpaid</option>
          <option value="partial">Partial</option>
          <option value="paid">Paid</option>
          <option value="no_show">No Show</option>
        </select>
      </div>

      <div class="sectionDivider"></div>

      <div style="font-weight:900;color:var(--gold);">Additional Sessions</div>
      <div id="sessions" style="margin-top:10px;"></div>
      <button type="button" class="secondarybtn" onclick="addSession()">+ Additional Session</button>

      <div class="sectionDivider"></div>

      <div class="field">
        <label>Notes</label>
        <textarea id="notes" placeholder=""></textarea>
      </div>

      <div class="field">
        <label>Image</label>
        <input type="file" id="image" accept="image/*">
      </div>

      <div class="actions-row">
        <button type="button" onclick="saveEntry()">Save</button>
        <button type="button" class="secondarybtn" onclick="closeForm()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- QUICK ADD: BAMMER -->
  <div class="modal" id="bammerModal">
    <div class="modal-box" id="bammerBox">
      <div class="modal-title">Quick Add — Bammer</div>

      <div class="field">
        <label>Date</label>
        <input type="date" id="bDate">
      </div>

      <div class="field">
        <label>Client Name</label>
        <input type="text" id="bClient" placeholder="">
      </div>

      <div class="field">
        <label>Tattoo Description</label>
        <textarea id="bDesc" placeholder=""></textarea>
      </div>

      <div class="row">
        <div class="field">
          <label>Location</label>
          <select id="bLocation">
            <option value="">Choose location</option>
            <option>Arm</option><option>Leg</option><option>Back</option><option>Chest</option>
            <option>Hand</option><option>Foot</option><option>Neck</option>
          </select>
        </div>
        <div class="field">
          <label>Total Price</label>
          <input type="number" id="bTotal" min="0" step="0.01" placeholder="">
        </div>
      </div>

      <div class="field">
        <label>Status</label>
        <select id="bStatus">
          <option value="paid">Paid</option>
          <option value="partial">Partial</option>
          <option value="unpaid">Unpaid</option>
          <option value="booked">Booked</option>
          <option value="no_show">No Show</option>
        </select>
      </div>

      <div class="actions-row">
        <button type="button" onclick="saveBammer()">Save Bammer</button>
        <button type="button" class="secondarybtn" onclick="closeBammerQuick()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- QUICK ADD: DEPOSIT ONLY -->
  <div class="modal" id="depositModal">
    <div class="modal-box" id="depositBox">
      <div class="modal-title">Quick Add — Deposit Only</div>

      <div class="field">
        <label>Date</label>
        <input type="date" id="dDate">
      </div>

      <div class="field">
        <label>Client Name</label>
        <input type="text" id="dClient" placeholder="">
      </div>

      <div class="row">
        <div class="field">
          <label>Client Contact</label>
          <input type="text" id="dContact" placeholder="">
        </div>
        <div class="field">
          <label>Client Social</label>
          <input type="text" id="dSocial" placeholder="">
        </div>
      </div>

      <div class="field">
        <label>Deposit For</label>
        <textarea id="dDesc" placeholder=""></textarea>
      </div>

      <div class="row">
        <div class="field">
          <label>Deposit Amount</label>
          <input type="number" id="dDeposit" min="0" step="0.01" placeholder="">
        </div>
        <div class="field">
          <label>Total Price</label>
          <input type="number" id="dTotal" min="0" step="0.01" placeholder="">
        </div>
      </div>

      <div class="field">
        <label>Location</label>
        <select id="dLocation">
          <option value="">Choose location</option>
          <option>Arm</option><option>Leg</option><option>Back</option><option>Chest</option>
          <option>Hand</option><option>Foot</option><option>Neck</option>
        </select>
      </div>

      <div class="actions-row">
        <button type="button" onclick="saveDepositOnly()">Save Deposit</button>
        <button type="button" class="secondarybtn" onclick="closeDepositQuick()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- VIEW ENTRY MODAL -->
  <div class="modal" id="viewModal">
    <div class="modal-box" id="viewBox"></div>
  </div>

  <!-- CLIENT PROFILE MODAL -->
  <div class="modal" id="clientModal">
    <div class="modal-box" id="clientBox"></div>
  </div>

  <!-- SETTINGS MODAL -->
  <div class="modal" id="settingsModal">
    <div class="modal-box" id="settingsBox">
      <div class="modal-title">Settings</div>

      <div class="summary-box" style="margin-top:0;">
        <div style="font-weight:900;color:var(--gold);">Payout Split</div>
        <div class="hint">Used for totals unless a month override exists.</div>
        <div class="field" style="margin-top:10px;">
          <label>Default Split %</label>
          <input id="defaultSplitPct" type="number" min="0" max="100" step="1" placeholder="">
        </div>
      </div>

      <div class="summary-box">
        <div style="font-weight:900;color:var(--gold);">Monthly override</div>
        <div class="hint">Set a different % for a specific month.</div>
        <div class="row" style="margin-top:10px;">
          <div class="field">
            <label>Month</label>
            <input id="overrideMonth" type="month">
          </div>
          <div class="field">
            <label>Split %</label>
            <input id="overridePct" type="number" min="0" max="100" step="1" placeholder="">
          </div>
        </div>
        <div class="actions-row">
          <button type="button" onclick="saveMonthOverride()">Save Override</button>
          <button type="button" class="secondarybtn" onclick="removeMonthOverride()">Remove Override</button>
        </div>
        <div id="overrideList" class="hint" style="margin-top:10px;"></div>
      </div>

      <div class="summary-box">
        <div style="font-weight:900;color:var(--gold);">Client Rewards</div>
        <div class="hint">Badges + discounts auto-update when you log tattoos.</div>
        <div class="actions-row">
          <button type="button" onclick="openRewards()">Open Rewards Setup</button>
        </div>
      </div>

      <div class="summary-box">
        <div style="font-weight:900;color:var(--gold);">Backup / Restore</div>
        <div class="hint">Download a backup so you never lose your data.</div>
        <div class="actions-row">
          <button type="button" onclick="downloadBackup()">Download Backup (JSON)</button>
        </div>
        <hr>
        <div class="hint">Restore from a backup JSON file.</div>
        <div class="field" style="margin-top:10px;">
          <label>Backup File</label>
          <input id="restoreFile" type="file" accept="application/json">
        </div>
        <div class="actions-row">
          <button type="button" class="dangerbtn" onclick="restoreBackup()">Restore Backup</button>
        </div>
      </div>

      <div class="actions-row">
        <button type="button" onclick="saveSplitSettings()">Save Settings</button>
        <button type="button" class="secondarybtn" onclick="closeSettings()">Close</button>
      </div>
    </div>
  </div>

  <!-- REWARDS MODAL -->
  <div class="modal" id="rewardsModal">
    <div class="modal-box" id="rewardsBox">
      <div class="modal-title">Client Rewards Setup</div>

      <details open>
        <summary>Badge Levels</summary>
        <div class="hint" style="margin-top:8px;">
          Levels are based on <b>tattoo count</b> (non-deposit-only entries). Highest matching tier wins.
        </div>
        <div id="levelsList" style="margin-top:10px;"></div>
        <div class="actions-row">
          <button type="button" onclick="addBadgeLevel()">+ Add Badge Level</button>
        </div>
      </details>

      <hr>

      <details open>
        <summary>Discount Tiers</summary>
        <div class="hint" style="margin-top:8px;">
          Discounts are also based on tattoo count. Highest matching tier wins.
        </div>
        <div id="discountsList" style="margin-top:10px;"></div>
        <div class="actions-row">
          <button type="button" onclick="addDiscountTier()">+ Add Discount Tier</button>
        </div>
      </details>

      <div class="actions-row">
        <button type="button" onclick="saveRewards()">Save Rewards</button>
        <button type="button" class="secondarybtn" onclick="closeRewards()">Close</button>
      </div>
    </div>
  </div>
<!-- CLIENTS MODAL -->
<div class="modal" id="clientsModal">
  <div class="modal-box" id="clientsBox">
    <div class="modal-title">Clients</div>

    <div id="clientsList"></div>

    <div class="actions-row">
      <button type="button" class="secondarybtn" onclick="closeClients()">Close</button>
    </div>
  </div>
</div>
  <!-- BILLS MODAL -->
  <div class="modal" id="billsModal">
    <div class="modal-box" id="billsBox">
      <div class="modal-title">Bills + Rent</div>

      <div class="summary-box" style="margin-top:0;">
        <div style="display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:center;">
          <div style="font-weight:900;color:var(--gold);">Daily target</div>
          <button type="button" class="secondarybtn" onclick="saveBills()">Save</button>
        </div>

        <div id="billsTodayOut" style="margin-top:10px;"></div>
        <div id="billsQuote" class="hint" style="margin-top:10px;"></div>
      </div>

      <hr>

      <div class="summary-box">
        <div style="font-weight:900;color:var(--gold);">Rent</div>

        <div class="row" style="margin-top:10px;">
          <div class="field">
            <label>Rent Amount</label>
            <input id="rentAmount" type="number" min="0" step="0.01" placeholder="">
          </div>

          <div class="field">
            <label>Saved So Far</label>
            <input id="rentSavedSoFar" type="number" min="0" step="0.01" placeholder="">
          </div>
        </div>

        <div class="row" style="margin-top:10px;">
          <div class="field">
            <label>Safe By Day (1–28)</label>
            <input id="rentSafeByDay" type="number" min="1" max="28" step="1" placeholder="">
          </div>

          <div class="field">
            <label>Rent Due</label>
            <input type="text" value="1st of every month" disabled>
          </div>
        </div>

        <div class="hint" style="margin-top:10px;">
          Safe-by day controls how aggressive the daily target is.
        </div>
      </div>

      <hr>

      <div class="summary-box">
        <div style="display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:center;">
          <div style="font-weight:900;color:var(--gold);">Bills</div>
          <button type="button" class="secondarybtn" onclick="addBill()">+ Add Bill</button>
        </div>

        <div id="billsList" style="margin-top:10px;"></div>
      </div>

      <div class="actions-row">
        <button type="button" class="secondarybtn" onclick="closeBills()">Close</button>
      </div>
    </div>
  </div>

  <!-- EXPORT MODAL -->
  <div class="modal" id="exportModal">
    <div class="modal-box" id="exportBox">
      <div class="modal-title">Export</div>

      <div class="summary-box" style="margin-top:0;">
        <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;">
          <div style="font-weight:900;color:var(--gold);">Logo</div>
          <div class="actions-row" style="margin-top:0;">
            <button type="button" class="secondarybtn" onclick="removeLogo()">Remove Logo</button>
          </div>
        </div>
        <div class="hint">Tap the logo in the header to upload a PNG.</div>
      </div>

      <hr>

      <div class="field">
        <label>Payday (week starts on this day)</label>
        <select id="paydaySelect">
          <option value="0">Sunday</option><option value="1">Monday</option><option value="2">Tuesday</option>
          <option value="3">Wednesday</option><option value="4">Thursday</option><option value="5">Friday</option>
          <option value="6">Saturday</option>
        </select>
      </div>

      <hr>

      <h4 style="margin:0;">Pay Period (Payday Week)</h4>
      <div class="row" style="margin-top:10px;">
        <div class="field">
          <label>Start</label>
          <input type="date" id="ppStart" disabled>
        </div>
        <div class="field">
          <label>End</label>
          <input type="date" id="ppEnd" disabled>
        </div>
      </div>
      <div class="actions-row">
        <button type="button" class="secondarybtn" onclick="prevPayPeriod()">◀ Prev</button>
        <button type="button" class="secondarybtn" onclick="nextPayPeriod()">Next ▶</button>
        <button type="button" onclick="exportPayPeriodCSV()">Export This Pay Period</button>
      </div>

      <hr>

      <h4 style="margin:0;">CSV Date Range</h4>
      <div class="row" style="margin-top:10px;">
        <div class="field">
          <label>Start</label>
          <input type="date" id="exportStart">
        </div>
        <div class="field">
          <label>End</label>
          <input type="date" id="exportEnd">
        </div>
      </div>

      <div class="actions-row">
        <button type="button" onclick="exportCSV()">Download CSV</button>
        <button type="button" class="secondarybtn" onclick="closeExport()">Close</button>
      </div>

      <div class="summary-box">
        <h4 style="margin:0 0 8px 0;">Export Summary</h4>
        <div class="actions-row">
          <button type="button" onclick="buildSummary('range')">Summary for Date Range</button>
          <button type="button" class="secondarybtn" onclick="buildSummary('payperiod')">Summary for Pay Period</button>
        </div>
        <div id="summaryOut" style="margin-top:10px; opacity:.95;"></div>
      </div>
    </div>
  </div>

  <div id="toasts"></div>

  <script src="bills.js"></script>
  <script src="app.js"></script>
</body>
</html>